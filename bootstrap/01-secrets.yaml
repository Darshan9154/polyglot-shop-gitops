# ------------------------------------------------------------
# Retail Store â€“ Secrets
# ------------------------------------------------------------
# This file contains ALL application and infrastructure secrets
# required by the retail-store platform.
#
# IMPORTANT:
# - This file is managed by Argo CD (GitOps)
# - Sync Wave -1 ensures secrets are applied BEFORE infra/apps
# - No secrets should ever be kubectl-applied manually
# ------------------------------------------------------------

---
apiVersion: v1
kind: Secret
metadata:
  name: mariadb-secret
  namespace: retail-store
  annotations:
    # Ensure secrets are created before infra StatefulSets
    argocd.argoproj.io/sync-wave: "-1"
type: Opaque
stringData:
  # MariaDB root password
  MYSQL_ROOT_PASSWORD: catalog_root_dev_pass

  # Application database details
  MYSQL_DATABASE: catalogdb
  MYSQL_USER: catalog_user
  MYSQL_PASSWORD: catalog_dev_pass

---
apiVersion: v1
kind: Secret
metadata:
  name: postgres-secret
  namespace: retail-store
  annotations:
    # Ensure secrets are created before Postgres StatefulSet
    argocd.argoproj.io/sync-wave: "-1"
type: Opaque
stringData:
  # Orders service database credentials
  POSTGRES_USER: orders_user
  POSTGRES_PASSWORD: orders_dev_pass
  POSTGRES_DB: orders

---
apiVersion: v1
kind: Secret
metadata:
  name: rabbitmq-secret
  namespace: retail-store
  annotations:
    # Ensure secrets are created before RabbitMQ StatefulSet
    argocd.argoproj.io/sync-wave: "-1"
type: Opaque
stringData:
  # RabbitMQ default credentials
  RABBITMQ_DEFAULT_USER: rabbitmq
  RABBITMQ_DEFAULT_PASS: rabbitmq_dev_pass
